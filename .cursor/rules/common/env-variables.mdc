---
description: 환경변수 파일 사용 규칙 및 제약사항
globs: **/.env*, **/*.env*
alwaysApply: true
---

# 환경변수 파일 규칙

## 기본 원칙

- **이 프로젝트에서는 `.env` 파일만 사용합니다.**
  - `.env.local`, `.env.development`, `.env.production` 등 다른 환경변수 파일은 사용하지 않습니다.
  - 모든 환경변수는 `.env` 파일 하나에만 정의합니다.

## .env 파일 구조

프로젝트 루트의 `.env` 파일은 다음 구조를 따릅니다:

```bash
# Clerk
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=
CLERK_SECRET_KEY=
NEXT_PUBLIC_CLERK_SIGN_IN_URL=
NEXT_PUBLIC_CLERK_SIGN_IN_FALLBACK_REDIRECT_URL=
NEXT_PUBLIC_CLERK_SIGN_UP_FALLBACK_REDIRECT_URL=

# Supabase
NEXT_PUBLIC_SUPABASE_URL=
NEXT_PUBLIC_SUPABASE_ANON_KEY=
SUPABASE_SERVICE_ROLE_KEY=
NEXT_PUBLIC_STORAGE_BUCKET=

# 공공API
NEXT_PUBLIC_TOUR_API_KEY=

# 네이버지도
NEXT_PUBLIC_NAVER_MAP_CLIENT_ID=
```

## 절대 금지 사항

- **`.env` 파일을 읽거나 참조하지 마세요.**
  - `read_file` 도구로 `.env` 파일을 읽지 않습니다.
  - `.env.local` 파일도 마찬가지로 읽거나 참조하지 않습니다.
  - 환경변수 값이 필요한 경우, 코드에서 `process.env.VARIABLE_NAME` 형태로 참조만 합니다.

- **환경변수 값을 코드에 하드코딩하지 마세요.**
  - API 키, 시크릿 키 등을 코드에 직접 작성하지 않습니다.
  - 항상 `process.env`를 통해 참조합니다.

## 환경변수 사용 예시

```typescript
// ✅ DO: process.env로 참조
const apiKey = process.env.NEXT_PUBLIC_TOUR_API_KEY;
if (!apiKey) {
  throw new Error("NEXT_PUBLIC_TOUR_API_KEY가 설정되지 않았습니다.");
}

// ❌ DON'T: .env 파일을 직접 읽기
// const envContent = await readFile(".env"); // 절대 금지!

// ❌ DON'T: 환경변수 값을 하드코딩
// const apiKey = "your-actual-api-key"; // 절대 금지!
```

## 환경변수 참조 시 주의사항

- 서버 사이드 전용 환경변수는 `NEXT_PUBLIC_` 접두사 없이 사용합니다.
  - 예: `CLERK_SECRET_KEY`, `SUPABASE_SERVICE_ROLE_KEY`
- 클라이언트에서 접근 가능한 환경변수는 `NEXT_PUBLIC_` 접두사를 사용합니다.
  - 예: `NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY`, `NEXT_PUBLIC_SUPABASE_URL`

## .env.example 파일

- `.env.example` 파일은 환경변수 목록만 포함합니다 (값 없음).
- 실제 `.env` 파일은 `.gitignore`에 포함되어 있어 커서가 접근할 수 없습니다.
- 환경변수 목록이 필요할 때는 `.env.example`을 참조하거나, 위의 구조를 참고합니다.
